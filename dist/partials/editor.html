<h5>Map Layout</h5>
<div class="section gf-form-group">
  <div class="section-heading"></div>
  <div class="gf-form">
    <label class="gf-form-label width-10">Center</label>
    <div class="gf-form-select-wrapper max-width-10">
      <select class="input-small gf-form-input" 
        ng-model="ctrl.panel.mapCenter" 
        ng-options="t for t in ['(0°, 0°)', 'North America', 'Europe', 'West Asia', 'SE Asia', 'cityenv', 'custom']" 
        ng-change="ctrl.setNewMapCenter()"
        >
      </select>
    </div>
  </div>


  <div ng-show="ctrl.panel.mapCenter === 'custom'">
    <div class="gf-form">
      <span class="width-2"></span>
      <label class="gf-form-label width-8">Latitude</label>
      <input type="text"
        class="input-small gf-form-input width-10"
        ng-model="ctrl.panel.mapCenterLatitude"
        ng-change="ctrl.setNewMapCenter()"
        ng-model-onblur />
    </div>
    <div class="gf-form">
      <span class="width-2"></span>
      <label class="gf-form-label width-8">Longitude</label>
      <input type="text"
        class="input-small gf-form-input width-10"
        ng-model="ctrl.panel.mapCenterLongitude"
        ng-change="ctrl.setNewMapCenter()"
        ng-model-onblur />
    </div>
  </div>

  <div class="gf-form">
    <label class="gf-form-label width-10">Initial Zoom</label>
    <input type="text" 
      class="input-small gf-form-input width-10" 
      placeholder="1"
      ng-model="ctrl.panel.initialZoom" 
      ng-change="ctrl.setZoom()"
      ng-model-onblur />
  </div>

  <gf-form-switch 
    class="gf-form"
    label="Sticky Labels" label-class="width-10"
    checked="ctrl.panel.stickyLabels" 
    on-change="ctrl.toggleStickyLabels()"
    >
  </gf-form-switch>
</div>


<!-- Metrics -->

<!-- <h5>Datasources</h5>
<div class="section-heading">AirQualityObserved</div>
  <div class="section gf-form-group">
    <div class="gf-form">
      <label class="gf-form-label width-10">Metrics</label>
      <textarea 
        class="gf-form-input width-30"
        ng-model="ctrl.panel.metrics"
        ng-change="ctrl.render()"
        rows="10" required ng-model-onblur
        >
      </textarea>        
    </div>
  </div>
</div> -->

<!-- <h5>Datasources 2</h5>
<div ng-repeat="layerName in ctrl.layerNames">
  <div class="section-heading">{{layerName}}</div>
  <div class="section gf-form-group">
    <div ng-repeat="metric in target.metricAggs">

      <div class="gf-form">
        <label class="gf-form-label width-10">{{metric.column}}</label>
        <input type="text"
          class="gf-form-input width-10"
          ng-init="metric.name = (metric.name ? metric.name : ctrl.defaultMetrics[metric.column].name)"
          ng-model="metric.name"
          ng-change="ctrl.refresh()"
          ng-model-onblur required
          >
        </input>

        <input type="text" 
          class="gf-form-input width-10"
          ng-init="metric.unit = (metric.unit ? metric.unit : ctrl.defaultMetrics[metric.column].unit)"
          ng-model="metric.unit"
          ng-change="ctrl.refresh()"
          ng-model-onblur required 
          >
        </input>

      </div>

    </div>
  </div>
</div> -->

<div class="section-heading">Field Mappings/Units</div>
<div class="section gf-form-group">
  <div ng-repeat="metric in ctrl.panel.metrics">
    <div class="gf-form">
      <span class="width-10"></span>
      <input type="text"
        class="gf-form-input width-10"
        ng-model="metric[0]"
        ng-blur="ctrl.refresh()"
        ng-model-onblur required
        >
      </input>

      <input type="text"
        class="gf-form-input width-10"
        ng-init="metric[1] = (!metric[1] ? ctrl.defaultMetrics[metric[0]].name : metric[1])"
        ng-model="metric[1]"
        ng-blur="ctrl.refresh()"
        ng-model-onblur required
        >
      </input>

      <input type="text" 
        class="gf-form-input width-10"
        ng-init="metric[2] = (!metric[2]? ctrl.defaultMetrics[metric[0]].unit : metric[2])"
        ng-model="metric[2]"
        ng-blur="ctrl.refresh()"
        ng-model-onblur 
        >
      </input>

      <label class="gf-form-label">
        <a class="pointer" ng-click="ctrl.handleRemoveMetrics($index)">
          <i class="fa fa-minus"></i>
        </a>
      </label>
    </div>
  </div>
  <div class="gf-form">
    <span class="width-10"></span>
    <label class="gf-form-label">
      <a class="pointer" ng-click="ctrl.handleClickAddMetric()">
        <i class="fa fa-plus"></i>
      </a>
    </label>
  </div>    
</div>

<h5>Map Layers</h5>
<div ng-repeat="layerName in ctrl.layerNames">
  <div class="section-heading">{{layerName}}</div>
  <div class="section gf-form-group">
    <div class="gf-form">
      <span class="gf-form-label width-10">Icon
        <info-popover mode="right-normal">
          <div ng-repeat="iconType in ctrl.iconTypes">
            <i class="fa fa-{{iconType}}"></i> - {{iconType}}
          </div>
        </info-popover>
      </span>

      <select class="gf-form-input icon-select"
        ng-model="ctrl.panel.layersIcons[layerName]"
        ng-options="iconType for iconType in ctrl.iconTypes"
        ng-change="ctrl.render()"
        >
      </select>      
    </div>
  </div>
</div>

<div>
  <p>Info:</p>
  <p>Adding this panel for the firt time to your dashboard will pre-fill Metrics tab fields.</p>
  <p>You must have a default datasource or select one from the availables.</p>
</div>
