{"version":3,"sources":["../src/utils.js"],"names":["showPollutants","providedPollutants","allPollutants","id","aqi","currentParameterForChart","measuresTable","document","querySelector","rows","deleteRow","el","getElementById","firstChild","removeChild","defaultPollutantOption","createElement","html","innerHTML","appendChild","pollutantsToShow","key","forEach","_value","value","pollutant","row","insertRow","innerCell0","name","innerCell1","unit","cell0","insertCell","cell1","newPollutant","toUpperCase","selected","mapDivHeight","getElementsByClassName","offsetHeight","mapDivWidth","offsetWidth","style","display","showHealthConcerns","risk","color","meaning","healthConcernsWrapper","healthConcerns","healthConcernsColor","healthRisk","backgroundColor","calculateAQI","AQI","aqiIndex","range","index"],"mappings":"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","file":"utils.js","sourcesContent":["function showPollutants(providedPollutants, allPollutants, id, aqi, currentParameterForChart) {\n\n  const measuresTable = document.querySelector('#measures_table > table > tbody');\n\n  while (measuresTable.rows[0]) measuresTable.deleteRow(0);\n\n  // Remove air paramters from dropdown\n  var el = document.getElementById('airParametersDropdown');\n  while ( el.firstChild ) {\n    el.removeChild( el.firstChild )\n  }\n\n  // ---\n\n  // Add default pollutant option to dropdown\n  const defaultPollutantOption = document.createElement('option');\n  const html = '<option value=\"0\">Air Parameter</option>';\n\n  defaultPollutantOption.innerHTML = html;\n  document.getElementById('airParametersDropdown').appendChild(defaultPollutantOption);\n  // -----\n\n  const pollutantsToShow = {};\n  for (const key in allPollutants) {\n    \n    allPollutants[key].forEach((_value) => {\n      if (_value.id === id) {\n        if (_value.value) {\n          if (!(pollutantsToShow[key])){\n            pollutantsToShow[key] = 0;\n          }\n          pollutantsToShow[key] = _value.value;\n        }\n      }\n    });\n  }\n\n  pollutantsToShow['aqi'] = aqi;\n\n  for (const pollutant in pollutantsToShow){\n    const row = measuresTable.insertRow(0);\n    //row.className = 'measure';\n\n    const innerCell0 = providedPollutants[pollutant].name;\n    const innerCell1 = pollutantsToShow[pollutant] + ' ' + providedPollutants[pollutant].unit;\n\n    const cell0 = row.insertCell(0);\n    const cell1 = row.insertCell(1);\n\n\n    cell0.innerHTML = innerCell0;\n    cell1.innerHTML = innerCell1;\n\n    // Add Pollutants to Chart Dropdown\n    const newPollutant = document.createElement('option');\n\n    newPollutant.id = 'pollutantOption';\n    newPollutant.value = pollutant.toUpperCase();\n\n    if(currentParameterForChart===newPollutant.value)\n      newPollutant.selected = 'selected';\n    \n    newPollutant.innerHTML = providedPollutants[pollutant].name;\n\n    document.getElementById('airParametersDropdown').appendChild(newPollutant);\n    // ----\n  }\n\n  const mapDivHeight = document.getElementsByClassName('map-container')[0].offsetHeight;\n  const mapDivWidth = document.getElementsByClassName('map-container')[0].offsetWidth;\n\n  // Only show the map secundary data (tables) when the map div is not too small\n  if (mapDivHeight >= 405 && mapDivWidth >= 860) {\n    document.getElementById('environment_table').style.display = 'block';\n    document.getElementById('measures_table').style.display = 'block';\n  }\n}\n\nfunction showHealthConcerns(providedPollutants, risk, color, meaning) {\n  const healthConcernsWrapper = document.getElementById('health_concerns_wrapper');\n  const healthConcerns = document.querySelector('#health_concerns_wrapper>div');\n  const healthConcernsColor = document.querySelector('#health_concerns_wrapper>div>span>span.color');\n  const healthRisk = document.getElementById('health_risk');\n\n  const mapDivHeight = document.getElementsByClassName('map-container')[0].offsetHeight;\n  const mapDivWidth = document.getElementsByClassName('map-container')[0].offsetWidth;\n\n  // Only show the map secundary data (tables) when the map div is not too small\n  if (mapDivHeight >= 405 && mapDivWidth >= 860) {\n    healthConcernsWrapper.style.display = 'block';\n    healthConcernsColor.style.backgroundColor = color;\n    healthRisk.innerHTML = risk;\n  }\n}\n\nfunction calculateAQI(AQI, aqi) {\n  let aqiIndex;\n  AQI.range.forEach((value, index) => {\n    if (aqi >= value) {\n      aqiIndex = index;\n    }\n  });\n  return aqiIndex;\n}\n\nexport {\n  showPollutants, showHealthConcerns, calculateAQI\n}"]}