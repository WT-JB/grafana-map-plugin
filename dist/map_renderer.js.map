{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","mapContainer","find","events","on","render","renderingCompleted","console","log","data","worldMap","WorldMap","hideAllGraphPopups","resize","panToMapCenter","clearCircles","setPollutants","drawPoints"],"mappings":";;;;;;AAGe,WAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrD,QAAMC,eAAeH,KAAKI,IAAL,CAAU,gBAAV,CAArB;;AAEAF,SAAKG,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7BC;AACAL,WAAKM,kBAAL;AACD,KAHD;;AAKA,aAASD,MAAT,GAAkB;AACpBE,cAAQC,GAAR,CAAY,eAAZ;;AAEI,UAAI,CAACR,KAAKS,IAAV,EAAgB;;AAEhB,UAAI,CAACT,KAAKU,QAAV,EAAoB;AAClBV,aAAKU,QAAL,GAAgB,IAAIC,QAAJ,CAAaX,IAAb,EAAmBC,aAAa,CAAb,CAAnB,CAAhB;AACD;;AAEDW;AACAZ,WAAKU,QAAL,CAAcG,MAAd;;AAEA;AACAb,WAAKU,QAAL,CAAcI,cAAd;;AAEAd,WAAKU,QAAL,CAAcK,YAAd;;AAEA;AACA;AACA;AACAf,WAAKU,QAAL,CAAcM,aAAd;AACA;AACA;;AAEAhB,WAAKU,QAAL,CAAcO,UAAd;AAED;AACF;;qBAnCuBrB,I;;;;AAHjBe,c;;AACEC,wB,mBAAAA,kB","file":"map_renderer.js","sourcesContent":["import WorldMap from './worldmap';\nimport { hideAllGraphPopups } from './utils/map_utils';\n\nexport default function link(scope, elem, attrs, ctrl) {\n  const mapContainer = elem.find('.map-container');\n\n  ctrl.events.on('render', () => {\n    render();\n    ctrl.renderingCompleted();\n  });\n\n  function render() {\nconsole.log('rendering....')\n\n    if (!ctrl.data) return;\n\n    if (!ctrl.worldMap) {\n      ctrl.worldMap = new WorldMap(ctrl, mapContainer[0]);\n    }\n\n    hideAllGraphPopups();\n    ctrl.worldMap.resize();\n\n    //if (ctrl.mapCenterMoved) \n    ctrl.worldMap.panToMapCenter();\n\n    ctrl.worldMap.clearCircles();\n\n    //for each target drawpoints  \n    // ctrl.panel.targets.forEach((target)=>{\n    //   console.log('processing target '+target.datasource)\n    ctrl.worldMap.setPollutants()\n    //   ctrl.worldMap.drawPoints(target);\n    // })\n\n    ctrl.worldMap.drawPoints();\n\n  }\n}\n"]}